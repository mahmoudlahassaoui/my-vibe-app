doctype html
html
  head
    title Welcome to My Vibe.d App
    link(rel="stylesheet", href="/style.css")
    script
      | function changeBackgroundColor() {
      |   const colors = [
      |     '#f5f5f5', '#e8f4fd', '#fff2e8', '#f0fff0', '#fff0f5', '#f0f8ff', '#fdf5e6', '#f5fffa',
      |     '#ffe4e1', '#e6e6fa', '#f0f8ff', '#ffefd5', '#f5deb3', '#dda0dd', '#98fb98', '#afeeee',
      |     '#ffd1dc', '#b0e0e6', '#ffb6c1', '#87ceeb', '#deb887', '#f0e68c', '#ffa07a', '#20b2aa'
      |   ];
      |   const button = document.querySelector('.color-btn');
      |   const currentColor = document.body.style.backgroundColor || '#f5f5f5';
      |   let newColor;
      |   do {
      |     newColor = colors[Math.floor(Math.random() * colors.length)];
      |   } while (newColor === currentColor);
      |   
      |   // Add smooth transition
      |   document.body.style.transition = 'background-color 0.8s ease-in-out';
      |   document.body.style.backgroundColor = newColor;
      |   
      |   // Button animation and text change
      |   button.style.transform = 'scale(1.2) rotate(360deg)';
      |   button.textContent = '🎨 AMAZING!';
      |   
      |   // Create floating particles effect
      |   createParticles();
      |   
      |   // Reset button after animation
      |   setTimeout(() => {
      |     button.style.transform = '';
      |     button.textContent = 'Change Background Color!';
      |   }, 800);
      | }
      | 
      | function createParticles() {
      |   const colors = ['#ff6b6b', '#4ecdc4', '#45b7d1', '#96ceb4', '#ffeaa7', '#dda0dd', '#98fb98'];
      |   for (let i = 0; i < 15; i++) {
      |     const particle = document.createElement('div');
      |     particle.className = 'particle';
      |     particle.style.cssText = `
      |       position: fixed;
      |       width: 10px;
      |       height: 10px;
      |       background: ${colors[Math.floor(Math.random() * colors.length)]};
      |       border-radius: 50%;
      |       pointer-events: none;
      |       z-index: 1000;
      |       left: ${Math.random() * window.innerWidth}px;
      |       top: ${Math.random() * window.innerHeight}px;
      |       animation: float 2s ease-out forwards;
      |     `;
      |     document.body.appendChild(particle);
      |     setTimeout(() => particle.remove(), 2000);
      |   }
      | }
  body
    nav
      ul
        li: a(href="/") Home
        - if (isLoggedIn)
          li: a(href="/contact") Contact
          li: a(href="/messages") Messages
          li: a(href="/logout") Logout (#{username})
        - else
          li: a(href="/login") Login
          li: a(href="/register") Register
    
    .container
      - if (isLoggedIn)
        h1 🎉 Welcome back, #{username}!
        .success
          p You are logged in and ready to use all features!
      - else
        h1 👋 Welcome to My Vibe.d App!
        p Please login or register to access all features.
      
      .stats
        p 📊 Total messages received: #{messageCount}
      
      h2 What can you do?
      ul.feature-list
        - if (isLoggedIn)
          li ✅ Send contact messages
          li ✅ View all messages
          li ✅ Access your account
          li ✅ Secure session management
        - else
          li 🔐 Create an account to get started
          li 🔐 Login to access messaging features
          li 📖 Learn about Vibe.d web development
      
      .actions
        - if (isLoggedIn)
          a.btn(href="/contact") Send Message
          a.btn.secondary(href="/messages") View Messages
        - else
          a.btn(href="/register") Get Started
          a.btn.secondary(href="/login") Login
      
      .fun-section
        h2 🎨 Fun Zone
        button.color-btn(onclick="changeBackgroundColor()") Change Background Color!